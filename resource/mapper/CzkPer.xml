<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//ibatis.apache.org//DTD Mapper 3.0//EN"
    "http://ibatis.apache.org/dtd/ibatis-3-mapper.dtd">
    
<mapper namespace="com.great.mapper.CzkPersonalMapper">

	  <!--  czk修改管理员的属性，包括状态，修改属性 -->
	<update id="updateAdminAtt" parameterType="com.great.bean.Admin" >
		<if test="adminId!=null and adminId!='' and state!=null and state!='' ">
			update t_admin set admin_state=#{state} where admin_id=#{adminId}
		</if>
	</update>
	
	<!-- 添加管理员 -->
	<insert id="addAdmin"  parameterType="com.great.bean.Admin">
	insert into t_admin (ADMIN_ID,ADMIN_NAME,ADMIN_ACCOUNT,ADMIN_PWD,ROLE_ID) values(SEQ_T_ADMIN.nextval,#{name},#{account}, #{password}, #{roleId})
	</insert>
	
		  <!--  czk条件模糊查询车主列表 -->
		<select id="conditionQueryCarUserList" parameterType="com.great.bean.Ower" resultType="HashMap">
		      select o.OWER_ID, o.OWER_NAME,o.OWER_ACCOUNT,o.OWER_PWD,o.OWER_PHONE,o.OWER_SEX,o.OWER_IDCARD,o.OWER_AGE,o.OWER_STATE,p.parm_type,p.PARM_NAME,
 to_char(o.OWER_CDATE,'yyyy-mm-dd hh24:mi:ss')OWER_CDATE from t_ower o,t_parm p where o.OWER_STATE=p.parm_val and p.parm_pid=7 
			<if test="owerName!=null and owerName!=''">
				and o.OWER_NAME LIKE '%${owerName}%'
			</if>
			<if test="owerAccount!=null and owerAccount!=''">
				 and o.OWER_ACCOUNT LIKE '%${owerAccount}%'
			</if>
			<if test="owerState!=0">
				and o.OWER_STATE=#{owerState}
			</if>
			<if test="owerSex!=0">
				and o.OWER_SEX=#{owerSex}
			</if>
			 order by o.OWER_ID asc
	</select>
</mapper>