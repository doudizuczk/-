<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//ibatis.apache.org//DTD Mapper 3.0//EN"
    "http://ibatis.apache.org/dtd/ibatis-3-mapper.dtd">
    
<mapper namespace="com.great.mapper.OwerMapper">
	
	<select id="owerLogin" parameterType="com.great.bean.Ower" resultType="com.great.bean.Ower">
		select OWER_ID "owerId",OWER_ACCOUNT "owerAccount",OWER_NAME "owerName",OWER_PHONE "owerPhone",OWER_SEX "owerSex",OWER_IDCARD "owerIdcard",OWER_AGE "owerAge",OWER_STATE "owerState",
		OWER_BALANCE "owerBalance" from T_OWER where OWER_ACCOUNT=#{owerAccount} and OWER_STATE=1
		<if test="owerPwd!=null and owerPwd!=''">
		and OWER_PWD=${owerPwd}
		</if>
	</select>
	<insert id="addOwer" parameterType="com.great.bean.Ower">
		insert into T_OWER(OWER_ID,OWER_ACCOUNT,OWER_PWD,OWER_PHONE)values(seq_t_ower.nextval,'${owerAccount}','${owerPwd}','${owerPhone}')
	</insert>
	
	<select id="searchOwersCar" parameterType="int" resultType="HashMap">
		select CAR_ID "carId",CAR_COLOR,to_char(CAR_CDATE,'YYYY-MM-DD') "carCdate",CAR_TYPE "carType" from T_CAR  where OWER_ID=#{_parameter} and CAR_STATE=1
	</select>
	
	<insert id="addCars" parameterType="com.great.bean.Car">
		insert into T_CAR(CAR_ID,CAR_COLOR,CAR_TYPE,OWER_ID)values('${carId}','${carColor}',1,${owerId})
	</insert>
	
	<update id="escCars" parameterType="String">
		update T_CAR set CAR_STATE=2 where CAR_ID=#{0}
	</update>
	
	<select id="searchPack" resultType="HashMap">
		select PACK_ID "packId",PACK_NAME "packName",PACK_TIME "packTime",PACK_COST "packCost" from T_PACK where PACK_TYPE=1 and PACK_STATE=1
	</select>
	
</mapper>