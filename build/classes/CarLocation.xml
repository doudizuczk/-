<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//ibatis.apache.org//DTD Mapper 3.0//EN"
    "http://ibatis.apache.org/dtd/ibatis-3-mapper.dtd">
<mapper namespace="com.great.mapper.CarLocationMapper">
	<select id="queryAll" parameterType="com.great.bean.CarLocation" resultType="com.great.bean.CarLocation">
		select rk.PARK_ID "carLocationId",rm.PARM_NAME "stateName",rk.PARK_ZONE "area",to_char(PARK_CDATE,'YYYY-MM-DD') "cdate" 
		from (select * from T_PARM
		<where>
			<if test="stateName!=null">
				and PARM_NAME=#{stateName}
			</if>
		
		</where>)  rm , 
		(select * from T_PARK 
		<where> 
			<if test="area!=null and area!='' ">
				and PARK_ZONE=#{area}
			</if>
			<if test="carLocationId!=null">
				and PARK_ID=#{carLocationId}
			</if>
		</where>
		) rk where rk.PARK_STATE=rm.PARM_VAL and rm.parm_type='车位状态' order by rk.PARK_ID
	</select>
	<select id="queryForbid"  resultType="com.great.bean.CarLocation">
		select PARK_ID "carLocationId",PARK_STATE "state",PARK_ZONE "area",to_char(PARK_CDATE,'YYYY-MM-DD') "cdate" 
		from T_PARK where PARK_STATE=2
	</select>
	<update id="forbidden" parameterType="int">
		update T_PARK set PARK_STATE=2 where PARK_ID=#{0}
	</update>
	<update id="permission" parameterType="int">
		update T_PARK set PARK_STATE=1 where PARK_ID=#{0}
	</update>
</mapper>
	
	
	
	
	
	
	
	
	
	
	
	
	
	

